Protocols h2 http/1.1

ServerName localhost
ServerSignature Off
ServerTokens Prod
TraceEnable Off

SSLProtocol TLSv1.3
SSLProxyProtocol TLSv1.3
SSLHonorCipherOrder off
SSLSessionTickets off
SSLUseStapling On
SSLStaplingCache "shmcb:logs/ssl_stapling(32768)"

DefaultRuntimeDir ${APACHE_RUN_DIR}
PidFile ${APACHE_PID_FILE}

Timeout 300
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 5

User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP}

HostnameLookups Off

ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log vhost_combined

LogLevel warn

IncludeOptional mods-enabled/*.load
IncludeOptional mods-enabled/*.conf

Include ports.conf

<Directory />
    Options FollowSymLinks
    AllowOverride None
    Require all denied
</Directory>

<Directory /usr/share>
    AllowOverride None
    Require all granted
</Directory>

<Directory /var/www/>
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>

Header onsuccess unset Cache-Control
Header always set Cache-Control "public, no-cache, no-transform"

Header onsuccess unset Strict-Transport-Security
Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"

Header onsuccess unset Permissions-Policy
Header always merge Permissions-Policy "interest-cohort=()"

Header onsuccess unset Powered-By
Header always set Powered-By "Light Of The Night Sky (LOTNS)"

Header onsuccess unset Author
Header always set Author "Izumi Sena Sora (UnOrdinary)"

Header onsuccess unset Sec-GPC
Header always set Sec-GPC "1"

Header onsuccess unset X-Frame-Options
Header always set X-Frame-Options "SAMEORIGIN"

Header onsuccess unset X-XSS-Protection
Header always set X-XSS-Protection "1; mode=block"

Header onsuccess unset X-Content-Type-Options
Header always set X-Content-Type-Options "nosniff"

Header onsuccess unset Referrer-Policy
Header always set Referrer-Policy "no-referrer"

Header onsuccess unset X-Robots-Tag
Header always set X-Robots-Tag "none"

Header onsuccess unset Cross-Origin-Resource-Policy
Header always set Cross-Origin-Resource-Policy "cross-origin"

Header onsuccess unset Cross-Origin-Embedder-Policy
Header always set Cross-Origin-Embedder-Policy "require-corp"

Header onsuccess unset Cross-Origin-Opener-Policy
Header always set Cross-Origin-Opener-Policy "same-origin"

Header onsuccess unset Expect-CT
Header always set Expect-CT "enforce, max-age=63072000"

Header onsuccess unset X-Powered-By
Header always unset X-Powered-By

AccessFileName .htaccess

<FilesMatch "^\.ht">
    Require all denied
</FilesMatch>

<FilesMatch "^\.git">
    Require all denied
</FilesMatch>

<FilesMatch "\.(?i:css|js|mjs|map|svg|gif|bmp|cur|svgz?|heic|heif|avif|a?png|jpe?g|ico|wasm|tflite||ttf|ttc|eot|otf|tt[cf]|woff2?|webp|webmanifest|tiff?|mp3|m4a|aac|ogg|midi?|wav|mp4|mov|webm|mpe?g|avi|ogv|flv|wmv)(\?v=.*)?$">
    Header onsuccess unset Cache-Control
    Header always set Cache-Control "public, max-age=31536000, immutable, no-transform"
</FilesMatch>

<FilesMatch "\.(?i:json|txt|xml|atom|pdf)(\?v=.*)?$">
    Header onsuccess unset Cache-Control
    Header always set Cache-Control "public, max-age=1800, immutable, no-transform"
</FilesMatch>

SetOutputFilter BROTLI_COMPRESS
BrotliCompressionQuality 6
BrotliFilterNote Input brotli_input_info
BrotliFilterNote Output brotli_output_info
BrotliFilterNote Ratio brotli_ratio_info
AddOutputFilterByType BROTLI_COMPRESS text/html text/richtext text/plain text/css text/x-script text/x-component text/x-java-source text/x-markdown application/javascript application/x-javascript text/javascript text/js image/x-icon image/vnd.microsoft.icon application/x-perl application/x-httpd-cgi text/xml application/xml application/xml+rss application/vnd.api+json application/x-protobuf application/json multipart/bag multipart/mixed application/xhtml+xml font/ttf font/otf font/x-woff image/svg+xml application/vnd.ms-fontobject application/ttf application/x-ttf application/otf application/x-otf application/truetype application/opentype application/x-opentype application/font-woff application/eot application/font application/font-sfnt application/wasm application/javascript-binast application/manifest+json application/ld+json application/graphql+json application/geo+json

LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %O" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

IncludeOptional conf-enabled/*.conf
IncludeOptional sites-enabled/*.conf

Alias /error "/var/www/html/error"
<Directory "/var/www/html/error">
    Options +Includes
    AddOutputFilter INCLUDES .html
    AddType text/html .html
</Directory>
ErrorDocument 400 /error/400.html
ErrorDocument 401 /error/401.html
ErrorDocument 402 /error/402.html
ErrorDocument 403 /error/403.html
ErrorDocument 404 /error/404.html
ErrorDocument 405 /error/405.html
ErrorDocument 406 /error/406.html
ErrorDocument 407 /error/407.html
ErrorDocument 408 /error/408.html
ErrorDocument 409 /error/409.html
ErrorDocument 410 /error/410.html
ErrorDocument 411 /error/411.html
ErrorDocument 412 /error/412.html
ErrorDocument 413 /error/413.html
ErrorDocument 414 /error/414.html
ErrorDocument 415 /error/415.html
ErrorDocument 416 /error/416.html
ErrorDocument 417 /error/417.html
ErrorDocument 421 /error/421.html
ErrorDocument 422 /error/422.html
ErrorDocument 423 /error/423.html
ErrorDocument 424 /error/424.html
ErrorDocument 426 /error/426.html
ErrorDocument 428 /error/428.html
ErrorDocument 429 /error/429.html
ErrorDocument 431 /error/431.html
ErrorDocument 451 /error/451.html
ErrorDocument 500 /error/500.html
ErrorDocument 501 /error/501.html
ErrorDocument 502 /error/502.html
ErrorDocument 503 /error/503.html
ErrorDocument 504 /error/504.html
ErrorDocument 505 /error/505.html
ErrorDocument 506 /error/506.html
ErrorDocument 507 /error/507.html
ErrorDocument 508 /error/508.html
ErrorDocument 510 /error/510.html
ErrorDocument 511 /error/511.html

AddDefaultCharset UTF-8
AddCharset UTF-8 \
    .html \
    .htm \
    .shtml \
    .css \
    .js \
    .mjs \
    .xml \
    .gif \
    .jpeg \
    .jpg \
    .atom \
    .rss \
    .mml \
    .txt \
    .jad \
    .wml \
    .htc \
    .avif \
    .png \
    .svg \
    .svgz \
    .tif \
    .tiff \
    .wbmp \
    .webp \
    .ico \
    .appcache \
    .bbaw \
    .ics \
    .jng \
    .bmp \
    .ttf \
    .otf \
    .woff \
    .woff2 \
    .jar \
    .war \
    .ear \
    .json \
    .hqx \
    .manifest \
    .webmanifest \
    .markdown \
    .md \
    .topojson \
    .vtt \
    .vcard \
    .vcf \
    .xloc \
    .doc \
    .pdf \
    .ps \
    .eps \
    .ai \
    .rtf \
    .m3u8 \
    .kml \
    .kmz \
    .xls \
    .eot \
    .ppt \
    .odg \
    .odp \
    .ods \
    .odt \
    .pptx \
    .xlsx \
    .docx \
    .wmlc \
    .wasm \
    .7z \
    .cco \
    .jardiff \
    .jnlp \
    .run \
    .pl \
    .pm \
    .prc \
    .pdb \
    .rar \
    .rpm \
    .sea \
    .swf \
    .sit \
    .tcl \
    .tk \
    .der \
    .pem \
    .crt \
    .xpi \
    .xhtml \
    .xspf \
    .zip \
    .bin \
    .exe \
    .dll \
    .deb \
    .dmg \
    .iso \
    .img \
    .msi \
    .msp \
    .msm \
    .mid \
    .midi \
    .kar \
    .mp3 \
    .ogg \
    .m4a \
    .ra \
    .3gpp \
    .3gp \
    .ts \
    .mp4 \
    .mpeg \
    .mpg \
    .mov \
    .webm \
    .flv \
    .m4v \
    .mng \
    .asx \
    .asf \
    .wmv \
    .avi

AddType text/html html htm shtml
AddType text/css css
AddType text/javascript js mjs
AddType text/xml xml
AddType image/gif gif
AddType image/jpeg jpeg jpg
AddType application/atom+xml atom
AddType application/rss+xml rss

AddType text/mathml mml
AddType text/plain txt
AddType text/vnd.sun.j2me.app-descriptor jad
AddType text/vnd.wap.wml wml
AddType text/x-component htc

AddType image/avif avif
AddType image/png png
AddType image/svg+xml svg svgz
AddType image/tiff tif tiff
AddType image/vnd.wap.wbmp wbmp
AddType image/webp webp
AddType image/x-icon ico
AddType image/x-jng jng
AddType image/x-ms-bmp bmp

AddType font/ttf ttf
AddType font/otf otf
AddType font/woff woff
AddType font/woff2 woff2

AddType application/java-archive jar war ear
AddType application/json json
AddType application/mac-binhex40 hqx
AddType application/manifest+json webmanifest
AddType application/msword doc
AddType application/pdf pdf
AddType application/postscript ps eps ai
AddType application/rtf rtf
AddType application/vnd.apple.mpegurl m3u8
AddType application/vnd.google-earth.kml+xml kml
AddType application/vnd.google-earth.kmz kmz
AddType application/vnd.ms-excel xls
AddType application/vnd.ms-fontobject eot
AddType application/vnd.ms-powerpoint ppt
AddType application/vnd.oasis.opendocument.graphics odg
AddType application/vnd.oasis.opendocument.presentation odp
AddType application/vnd.oasis.opendocument.spreadsheet ods
AddType application/vnd.oasis.opendocument.text odt
AddType application/vnd.openxmlformats-officedocument.presentationml.presentation pptx
AddType application/vnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx
AddType application/vnd.openxmlformats-officedocument.wordprocessingml.document docx
AddType application/vnd.wap.wmlc wmlc
AddType application/wasm wasm
AddType application/x-7z-compressed 7z
AddType application/x-cocoa cco
AddType application/x-java-archive-diff jardiff
AddType application/x-java-jnlp-file jnlp
AddType application/x-makeself run
AddType application/x-perl pl pm
AddType application/x-pilot prc pdb
AddType application/x-rar-compressed rar
AddType application/x-redhat-package-manager rpm
AddType application/x-sea sea
AddType application/x-shockwave-flash swf
AddType application/x-stuffit sit
AddType application/x-tcl tcl tk
AddType application/x-x509-ca-cert der pem crt
AddType application/x-xpinstall xpi
AddType application/xhtml+xml xhtml
AddType application/xspf+xml xspf
AddType application/zip zip

AddType application/octet-stream bin exe dll
AddType application/octet-stream deb
AddType application/octet-stream dmg
AddType application/octet-stream iso img
AddType application/octet-stream msi msp msm

AddType audio/midi mid midi kar
AddType audio/mpeg mp3
AddType audio/ogg ogg
AddType audio/x-m4a m4a
AddType audio/x-realaudio ra

AddType video/3gpp 3gpp 3gp
AddType video/mp2t ts
AddType video/mp4 mp4
AddType video/mpeg mpeg mpg
AddType video/quicktime mov
AddType video/webm webm
AddType video/x-flv flv
AddType video/x-m4v m4v
AddType video/x-mng mng
AddType video/x-ms-asf asx asf
AddType video/x-ms-wmv wmv
AddType video/x-msvideo avi
